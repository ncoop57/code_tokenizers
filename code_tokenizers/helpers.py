# AUTOGENERATED! DO NOT EDIT! File to edit: ../nbs/02_helpers.ipynb.

# %% auto 0
__all__ = ['get_query', 'get_definitions']

# %% ../nbs/02_helpers.ipynb 6
def get_query(language, program_lang):
    "Get a query based on the language"
    if program_lang == "python":
        return language.query("""
            (function_definition
                name: (identifier) @func.name)

            (class_definition
                name: (identifier) @class.name)
            """
        )

# %% ../nbs/02_helpers.ipynb 7
def get_definitions(file_contents, tokenizer):
    """
    Get all definitions from a given list of files
    """
    project_content = "\n\n".join(file_contents)
    tree = tokenizer.parser.parse(project_content.encode())
    root_node = tree.root_node
    query = get_query(tokenizer.language, tokenizer.program_lang)
    captures = query.captures(root_node)
    definitions = {node.text.decode() for node, _ in captures}
    return definitions
